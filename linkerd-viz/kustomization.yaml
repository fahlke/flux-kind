apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- helmrelease-linkerd-viz.yaml

# Additional dashboards for Linkerd-Viz
# ref: https://linkerd.io/2.13/tasks/grafana/#install-grafana
# ref: https://grafana.com/orgs/linkerd/dashboards
configMapGenerator:
- name: linkerd-viz-dashboards
  namespace: linkerd-viz
  options:
    labels:
      grafana_dashboard: "1"
  # until the PR (https://github.com/linkerd/linkerd2/pull/11017) is merged, the forked dashboards are used
  files:
  - authority.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/authority.json
  - cronjob.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/cronjob.json
  - daemonset.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/daemonset.json
  - deployment.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/deployment.json
  - health.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/health.json
  - job.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/job.json
  - kubernetes.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/kubernetes.json
  - multicluster.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/multicluster.json
  - namespace.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/namespace.json
  - pod.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/pod.json
  - prometheus-20-stats.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/prometheus-20-stats.json
  - prometheus-benchmark.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/prometheus-benchmark.json
  - replicaset.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/replicaset.json
  - replicationcontroller.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/replicationcontroller.json
  - route.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/route.json
  - service.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/service.json
  - statefulset.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/statefulset.json
  - top-line.json=https://raw.githubusercontent.com/albundy83/linkerd2/new_grafana_templates/grafana/dashboards/top-line.json
  #files:
  #- top-line.json=https://grafana.com/api/dashboards/15474/revisions/4/download
  #- health.json=https://grafana.com/api/dashboards/15486/revisions/3/download
  #- kubernetes.json=https://grafana.com/api/dashboards/15479/revisions/2/download
  #- namespace.json=https://grafana.com/api/dashboards/15478/revisions/3/download
  #- deployment.json=https://grafana.com/api/dashboards/15475/revisions/6/download
  #- pod.json=https://grafana.com/api/dashboards/15477/revisions/3/download
  #- service.json=https://grafana.com/api/dashboards/15480/revisions/3/download
  #- route.json=https://grafana.com/api/dashboards/15481/revisions/3/download
  #- authority.json=https://grafana.com/api/dashboards/15482/revisions/3/download
  #- cronjob.json=https://grafana.com/api/dashboards/15483/revisions/3/download
  #- job.json=https://grafana.com/api/dashboards/15487/revisions/3/download
  #- daemonset.json=https://grafana.com/api/dashboards/15484/revisions/3/download
  #- replicaset.json=https://grafana.com/api/dashboards/15491/revisions/3/download
  #- statefulset.json=https://grafana.com/api/dashboards/15493/revisions/3/download
  #- replicationcontroller.json=https://grafana.com/api/dashboards/15492/revisions/4/download
  #- prometheus.json=https://grafana.com/api/dashboards/15489/revisions/2/download
  #- prometheus-benchmark.json=https://grafana.com/api/dashboards/15490/revisions/2/download
  #- multicluster.json=https://grafana.com/api/dashboards/15488/revisions/3/download
